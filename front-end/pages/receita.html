<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Receitas</title>
    <link rel="stylesheet" href="../css/receita.css"> <!-- usa o CSS exclusivo -->
    <script src="../scripts/receita.js" defer></script>
</head>

<body class="doodle-body flex flex-col items-center justify-center min-h-screen p-6">

    <!-- Navbar -->
    <nav class="navbar">
        <a href="home.html" class="nav-button">In√≠cio</a>
        <a href="despesas.html" class="nav-button">Despesas</a>
        <a href="receita.html" class="nav-button active">Receitas</a>
        <a href="relatorio.html" class="nav-button">Relat√≥rios</a>
        <a href="categorias.html" class="nav-button">Categorias</a>
    </nav>

    <div id="main-app" class="w-full max-w-lg space-y-6 bg-white p-6 rounded-2xl shadow doodle-card">
        <h1 class="text-3xl font-bold text-center">Gerenciar Receitas</h1>

        <!-- Formul√°rio de nova receita -->
        <form id="add-income-form">
            <input type="text" id="income-description" placeholder="Descri√ß√£o" class="doodle-input" required>
            <input type="number" id="income-amount" placeholder="Valor" class="doodle-input" step="0.01" required>
            <input type="date" id="income-date" class="doodle-input" required lang="pt-BR">

            <select id="income-category" class="doodle-input" required>
                <option value="" disabled selected>Selecione uma categoria</option>
            </select>

            <!-- üîπ Forma de recebimento -->
            <select id="income-payment" class="doodle-input" required>
                <option value="" disabled selected>Forma de recebimento</option>
                <option value="DINHEIRO">Dinheiro</option>
                <option value="CARTAO">Cart√£o</option>
                <option value="PIX">Pix</option>
            </select>

            <button id="add-income-btn" type="submit" class="doodle-button">Adicionar Receita</button>
        </form>

        <!-- Caixa do saldo -->
        <div id="balance-box" class="balance-box">
            <span>üí∞ Saldo Atual:</span>
            <strong id="current-balance">R$ 0,00</strong>
        </div>

        <!-- Header da lista -->
        <div class="list-header">
            <h2 class="text-xl font-semibold">√öltimas Receitas</h2>
            <button id="refresh-incomes" class="doodle-button px-3 py-1 text-sm">‚ü≥</button>
        </div>

        <!-- Lista -->
        <div class="doodle-box">
            <!-- Cabe√ßalho das colunas -->
            <div class="income-columns">
                <div>Descri√ß√£o</div>
                <div>Valor</div>
                <div>Data</div>
                <div>Categoria</div>
                <div>Recebimento</div>
                <div>A√ß√µes</div>
            </div>

            <ul id="income-list" class="space-y-2"></ul>
        </div>

        <!-- Modal edi√ß√£o -->
        <div id="edit-income-modal" class="modal-overlay hidden">
            <div class="modal-card w-full max-w-lg space-y-6 bg-white p-6 rounded-2xl shadow doodle-card">
                <button id="close-edit-income" class="modal-close">‚úñ</button>
                <h2 class="text-xl font-bold mb-4">Editar Receita</h2>
                <form id="edit-income-form" class="space-y-4">
                    <input type="hidden" id="edit-income-id">

                    <input type="text" id="edit-income-description" class="doodle-input w-full" required>
                    <input type="number" id="edit-income-amount" class="doodle-input w-full" step="0.01" required>
                    <input type="date" id="edit-income-date" class="doodle-input w-full" required>

                    <select id="edit-income-category" class="doodle-input w-full" required>
                        <option value="" disabled selected>Selecione uma categoria</option>
                    </select>

                    <!-- üîπ Forma de recebimento no modal -->
                    <select id="edit-income-payment" class="doodle-input w-full" required>
                        <option value="" disabled selected>Forma de recebimento</option>
                        <option value="DINHEIRO">Dinheiro</option>
                        <option value="CARTAO">Cart√£o</option>
                        <option value="PIX">Pix</option>
                    </select>

                    <div class="flex justify-end gap-3">
                        <button type="button" id="cancel-edit-income" class=